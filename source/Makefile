ROOT = ..
TARGETS = $(ROOT)/libdoubletake.so
LIBS = dl pthread
INCLUDE_DIRS = $(ROOT)/include $(ROOT)/heaplayers

# -DEVALUATING_PERF
# -DDEBUG_LEVEL=0
CFLAGS_OVERFLOW     = -DDETECT_OVERFLOW
CFLAGS_USEAFTERFREE = -DDETECT_USAGE_AFTER_FREE 
CFLAGS_LEAKS        = -DDETECT_MEMORY_LEAKAGE
CFLAGS_ALL          = $(CFLAGS_OVERFLOW)
#CFLAGS_ALL          = $(CFLAGS_OVERFLOW) $(CFLAGS_USEAFTERFREE)
#CFLAGS_ALL          = $(CFLAGS_OVERFLOW) $(CFLAGS_USEAFTERFREE) $(CFLAGS_LEAKS)

CFLAGS = -fPIC -fno-omit-frame-pointer -Wno-deprecated -D'CUSTOM_PREFIX(x)=doubletake_\#\#x' -Werror \
	-DDEBUG_LEVEL=1 -DDEBUG_ROLLBACK -DSSE_SUPPORT -DHANDLE_SYSCALL -DMULTI_THREAD\
	$(CFLAGS_ALL) 
	
#-DDEBUG_LEVEL=1 -DDEBUG_ROLLBACK -DSSE_SUPPORT -DHANDLE_SYSCALL -DMULTI_THREAD\
#-DDEBUG_LEVEL=1 -DDEBUG_ROLLBACK -DSSE_SUPPORT -DHANDLE_SYSCALL -DMULTI_THREAD\

include $(ROOT)/common.mk
